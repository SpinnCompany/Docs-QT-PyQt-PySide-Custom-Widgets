"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8728],{6445:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Advanced/Logging","title":"Logging","description":"Overview","source":"@site/docs/03-Advanced/Logging.md","sourceDirName":"03-Advanced","slug":"/Advanced/Logging","permalink":"/Docs-QT-PyQt-PySide-Custom-Widgets/Advanced/Logging","draft":false,"unlisted":false,"editUrl":"https://github.com/SpinnCompany/Docs-QT-PyQt-PySide-Custom-Widgets/tree/main/docs/03-Advanced/Logging.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"QAppSettings","permalink":"/Docs-QT-PyQt-PySide-Custom-Widgets/Advanced/QAppSettings"},"next":{"title":"WidgetsWorker","permalink":"/Docs-QT-PyQt-PySide-Custom-Widgets/Advanced/WidgetsWorker"}}');var l=s(4848),o=s(8453);const r={},t="Logging",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Key Features:",id:"key-features",level:3},{value:"Logger Setup",id:"logger-setup",level:2},{value:"Example",id:"example",level:3},{value:"Logging Functions",id:"logging-functions",level:2},{value:"<code>logInfo(message)</code>",id:"loginfomessage",level:3},{value:"<code>logWarning(message)</code>",id:"logwarningmessage",level:3},{value:"<code>logError(message)</code>",id:"logerrormessage",level:3},{value:"<code>logException(exception, message=&quot;Exception&quot;)</code>",id:"logexceptionexception-messageexception",level:3},{value:"<code>logCritical(message)</code>",id:"logcriticalmessage",level:3},{value:"Exception Handling",id:"exception-handling",level:2},{value:"Example",id:"example-1",level:3},{value:"QSettings Integration",id:"qsettings-integration",level:2},{value:"<code>get_show_custom_widgets_logs()</code>",id:"get_show_custom_widgets_logs",level:3},{value:"Example",id:"example-2",level:3},{value:"<code>set_show_custom_widgets_logs(value: bool)</code>",id:"set_show_custom_widgets_logsvalue-bool",level:3},{value:"Log File Location",id:"log-file-location",level:2},{value:"Customization",id:"customization",level:2},{value:"Example of Full Logging Workflow",id:"example-of-full-logging-workflow",level:2}];function g(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"logging",children:"Logging"})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["This logging system is designed to capture detailed logs of the application, including custom widget-related logs, warnings, errors, and exceptions. It uses Python's built-in ",(0,l.jsx)(n.code,{children:"logging"})," module, integrated with Qt's ",(0,l.jsx)(n.code,{children:"QSettings"})," for user preferences, and allows both file and console logging."]}),"\n",(0,l.jsx)(n.h3,{id:"key-features",children:"Key Features:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Rotating File Handler"}),": Logs are stored in a rotating file to avoid excessive log file sizes."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"QSettings Integration"}),": Logs can be conditionally shown based on a setting stored in ",(0,l.jsx)(n.code,{children:"QSettings"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Exception Handling"}),": Unhandled exceptions are captured and logged with detailed traceback."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"logger-setup",children:"Logger Setup"}),"\n",(0,l.jsxs)(n.p,{children:["The logger is set up through the ",(0,l.jsx)(n.code,{children:"setupLogger()"})," function. It configures:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["A ",(0,l.jsx)(n.strong,{children:"RotatingFileHandler"})," for saving log entries to ",(0,l.jsx)(n.code,{children:"custom_widgets.log"})," in a ",(0,l.jsx)(n.code,{children:"logs"})," directory."]}),"\n",(0,l.jsxs)(n.li,{children:["A ",(0,l.jsx)(n.strong,{children:"console handler"})," to print log messages to the console."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Log rotation"}),": The log file will have a maximum size of 5 MB, with up to 3 backup logs."]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'logFilePath = os.path.join(os.getcwd(), "logs/custom_widgets.log")\r\nlogDirectory = os.path.dirname(logFilePath)\r\nif logDirectory != "" and not os.path.exists(logDirectory):\r\n    os.makedirs(logDirectory)\n'})}),"\n",(0,l.jsxs)(n.p,{children:["The log file path is defined as ",(0,l.jsx)(n.code,{children:"logs/custom_widgets.log"}),", and the directory is created if it does not exist."]}),"\n",(0,l.jsx)(n.h2,{id:"logging-functions",children:"Logging Functions"}),"\n",(0,l.jsx)(n.h3,{id:"loginfomessage",children:(0,l.jsx)(n.code,{children:"logInfo(message)"})}),"\n",(0,l.jsx)(n.p,{children:"Logs an informational message."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Level"}),": INFO"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'logInfo("Application started")\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"logwarningmessage",children:(0,l.jsx)(n.code,{children:"logWarning(message)"})}),"\n",(0,l.jsx)(n.p,{children:"Logs a warning message."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Level"}),": WARNING"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'logWarning("This is a warning")\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"logerrormessage",children:(0,l.jsx)(n.code,{children:"logError(message)"})}),"\n",(0,l.jsx)(n.p,{children:"Logs an error message."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Level"}),": ERROR"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'logError("An error occurred")\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"logexceptionexception-messageexception",children:(0,l.jsx)(n.code,{children:'logException(exception, message="Exception")'})}),"\n",(0,l.jsx)(n.p,{children:"Logs an exception with detailed traceback."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Level"}),": ERROR"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'try:\r\n    1 / 0  # Deliberate exception\r\nexcept Exception as e:\r\n    logException(e, "Division by zero error")\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"logcriticalmessage",children:(0,l.jsx)(n.code,{children:"logCritical(message)"})}),"\n",(0,l.jsx)(n.p,{children:"Logs a critical message."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Level"}),": CRITICAL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'logCritical("Critical failure")\n'})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"exception-handling",children:"Exception Handling"}),"\n",(0,l.jsxs)(n.p,{children:["The system provides a global handler for unhandled exceptions by overriding ",(0,l.jsx)(n.code,{children:"sys.excepthook"}),". When an unhandled exception occurs, it:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Logs the exception with full traceback."}),"\n",(0,l.jsx)(n.li,{children:"Prints the detailed exception information to the console."}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"sys.excepthook = handle_unhandled_exception\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-1",children:"Example"}),"\n",(0,l.jsx)(n.p,{children:"If an unhandled exception occurs, the output will look like:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'Unhandled exception occurred:\r\nTraceback (most recent call last):\r\n  File "example.py", line 10, in <module>\r\n    1 / 0\r\nZeroDivisionError: division by zero\n'})}),"\n",(0,l.jsx)(n.h2,{id:"qsettings-integration",children:"QSettings Integration"}),"\n",(0,l.jsx)(n.h3,{id:"get_show_custom_widgets_logs",children:(0,l.jsx)(n.code,{children:"get_show_custom_widgets_logs()"})}),"\n",(0,l.jsxs)(n.p,{children:["This function retrieves the value of the ",(0,l.jsx)(n.code,{children:"showCustomWidgetsLogs"})," setting stored in ",(0,l.jsx)(n.code,{children:"QSettings"}),". If ",(0,l.jsx)(n.code,{children:"True"}),", log messages are printed to the console."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Key"}),": ",(0,l.jsx)(n.code,{children:"showCustomWidgetsLogs"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Default Value"}),": ",(0,l.jsx)(n.code,{children:"False"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example-2",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'settings = QSettings("MyCompany", "MyApp")\r\nvalue = settings.value("showCustomWidgetsLogs", False, type=bool)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"set_show_custom_widgets_logsvalue-bool",children:(0,l.jsx)(n.code,{children:"set_show_custom_widgets_logs(value: bool)"})}),"\n",(0,l.jsxs)(n.p,{children:["Sets the value of ",(0,l.jsx)(n.code,{children:"showCustomWidgetsLogs"})," in ",(0,l.jsx)(n.code,{children:"QSettings"}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Usage"}),":","\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"set_show_custom_widgets_logs(True)\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"You can setup your log value settings from your json styles file:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-json",children:'{\r\n  "LiveCompileQss": true,\r\n  "ShowLogs": true,\r\n  "CheckForMissingicons": false,\r\n  "QSettings": [\r\n      {...}\r\n  ]\r\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"log-file-location",children:"Log File Location"}),"\n",(0,l.jsxs)(n.p,{children:["By default, the log file is stored in the ",(0,l.jsx)(n.code,{children:"logs/"})," directory relative to the current working directory:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Log file path"}),": ",(0,l.jsx)(n.code,{children:"logs/custom_widgets.log"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Backup log files"}),": Up to 3 backup log files are kept with the rotating file handler, each with a maximum size of 5 MB."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"customization",children:"Customization"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Log level"}),": The log level is set to ",(0,l.jsx)(n.code,{children:"DEBUG"})," by default. You can modify it in the ",(0,l.jsx)(n.code,{children:"setupLogger()"})," function if needed."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Log format"}),": The log format is set as ",(0,l.jsx)(n.code,{children:"%(asctime)s - %(levelname)s - %(message)s"}),". You can customize the format as needed."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"example-of-full-logging-workflow",children:"Example of Full Logging Workflow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Setup Logger"}),": Initialize the logger at the beginning of your application."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"setupLogger()\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Log Messages"}),": Use the logging functions throughout your application."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'logInfo("Application started")\r\nlogWarning("This is a warning")\r\nlogError("An error occurred")\n'})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Handle Unhandled Exceptions"}),": Configure the global exception handler to log unhandled exceptions."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"sys.excepthook = handle_unhandled_exception\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Configure Console Output"}),": Use ",(0,l.jsx)(n.code,{children:"set_show_custom_widgets_logs(True)"})," to display logs in the console."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This logging system provides a comprehensive, configurable, and scalable approach for tracking application activity, debugging issues, and handling exceptions in a clean and organized manner."})]})}function a(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(g,{...e})}):g(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var i=s(6540);const l={},o=i.createContext(l);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);