"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6253],{4836:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"Advanced/WidgetsWorker","title":"WidgetsWorker","description":"WidgetsWorker provides a robust threading solution for PyQt/PySide applications, allowing you to run background tasks without freezing the user interface. This module implements a worker pattern using QRunnable to handle concurrent operations efficiently within the Custom Widgets ecosystem.","source":"@site/docs/03-Advanced/WidgetsWorker.md","sourceDirName":"03-Advanced","slug":"/Advanced/WidgetsWorker","permalink":"/Advanced/WidgetsWorker","draft":false,"unlisted":false,"editUrl":"https://github.com/SpinnCompany/Docs-QT-PyQt-PySide-Custom-Widgets/tree/main/docs/03-Advanced/WidgetsWorker.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Logging","permalink":"/Advanced/Logging"},"next":{"title":"Basicusage","permalink":"/Usage-Examples/BasicUsage"}}');var i=s(4848),t=s(8453);const o={},l="WidgetsWorker",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Core Components",id:"core-components",level:2},{value:"WorkerSignals Class",id:"workersignals-class",level:3},{value:"Worker Class",id:"worker-class",level:3},{value:"WorkerResponse Class",id:"workerresponse-class",level:3},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Simple Background Task",id:"simple-background-task",level:3},{value:"Worker with Arguments",id:"worker-with-arguments",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Integration with Custom Widgets",id:"integration-with-custom-widgets",level:2},{value:"With Progress Indicators",id:"with-progress-indicators",level:3},{value:"With Theme Engine",id:"with-theme-engine",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Multiple Coordinated Workers",id:"multiple-coordinated-workers",level:3},{value:"Interruptible Worker",id:"interruptible-worker",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Always Handle Errors",id:"1-always-handle-errors",level:3},{value:"2. Use Progress Callbacks for Long Tasks",id:"2-use-progress-callbacks-for-long-tasks",level:3},{value:"3. Proper Resource Cleanup",id:"3-proper-resource-cleanup",level:3},{value:"Key Features in Custom Widgets Context",id:"key-features-in-custom-widgets-context",level:2},{value:"Example: File Processing with Progress",id:"example-file-processing-with-progress",level:2}];function d(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"widgetsworker",children:"WidgetsWorker"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"WidgetsWorker"})," provides a robust threading solution for PyQt/PySide applications, allowing you to run background tasks without freezing the user interface. This module implements a worker pattern using ",(0,i.jsx)(r.code,{children:"QRunnable"})," to handle concurrent operations efficiently within the Custom Widgets ecosystem."]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"WidgetsWorker"})," module enables seamless background task execution in your Qt applications:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Thread Management"}),": Easy-to-use worker threads for background operations"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Signal-Based Communication"}),": Safe communication between worker threads and the main UI thread"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Progress Tracking"}),": Built-in progress reporting for long-running tasks"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Error Handling"}),": Comprehensive exception handling with proper error propagation"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Thread Safety"}),": Proper cleanup and interruption support"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"core-components",children:"Core Components"}),"\n",(0,i.jsx)(r.h3,{id:"workersignals-class",children:"WorkerSignals Class"}),"\n",(0,i.jsx)(r.p,{children:"Defines the signals available from a running worker thread:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"class WorkerSignals(QObject):\r\n    finished = Signal()          # Emitted when thread completes\r\n    error = Signal(tuple)        # Emitted on error: (exctype, value, traceback)\r\n    result = Signal(object)      # Emitted with processing result\r\n    progress = Signal(int)       # Emitted with progress percentage\n"})}),"\n",(0,i.jsx)(r.h3,{id:"worker-class",children:"Worker Class"}),"\n",(0,i.jsxs)(r.p,{children:["The main worker thread class that inherits from ",(0,i.jsx)(r.code,{children:"QRunnable"}),":"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"class Worker(QRunnable):\r\n    def __init__(self, fn, *args, **kwargs):\r\n        super(Worker, self).__init__()\r\n        self.fn = fn\r\n        self.args = args\r\n        self.kwargs = kwargs\r\n        self.signals = WorkerSignals()\r\n        self.kwargs['progress_callback'] = self.signals.progress\r\n        self.is_interrupted = False\r\n    \r\n    def stop(self):\r\n        self.is_interrupted = True\n"})}),"\n",(0,i.jsx)(r.h3,{id:"workerresponse-class",children:"WorkerResponse Class"}),"\n",(0,i.jsx)(r.p,{children:"Provides utility functions for handling worker responses with basic print functionality."}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(r.h3,{id:"simple-background-task",children:"Simple Background Task"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'from Custom_Widgets.WidgetsWorker import Worker\r\nfrom qtpy.QtCore import QThreadPool\r\n\r\ndef long_running_task(progress_callback=None):\r\n    """Example background task"""\r\n    for i in range(100):\r\n        if progress_callback:\r\n            progress_callback.emit(i + 1)\r\n        QThread.msleep(50)  # Simulate work\r\n    return "Task completed"\r\n\r\nclass MyWindow(QMainWindow):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.threadpool = QThreadPool()\r\n        \r\n    def start_task(self):\r\n        worker = Worker(long_running_task)\r\n        worker.signals.result.connect(self.on_task_result)\r\n        worker.signals.progress.connect(self.on_task_progress)\r\n        worker.signals.finished.connect(self.on_task_finished)\r\n        self.threadpool.start(worker)\r\n    \r\n    def on_task_result(self, result):\r\n        print(f"Result: {result}")\r\n    \r\n    def on_task_progress(self, progress):\r\n        print(f"Progress: {progress}%")\r\n    \r\n    def on_task_finished(self):\r\n        print("Task finished")\n'})}),"\n",(0,i.jsx)(r.h3,{id:"worker-with-arguments",children:"Worker with Arguments"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"def process_data(data_list, multiplier, progress_callback=None):\r\n    results = []\r\n    total = len(data_list)\r\n    \r\n    for i, item in enumerate(data_list):\r\n        if progress_callback:\r\n            progress = int((i + 1) / total * 100)\r\n            progress_callback.emit(progress)\r\n        \r\n        results.append(item * multiplier)\r\n        QThread.msleep(10)\r\n    \r\n    return results\r\n\r\ndef start_processing(self):\r\n    data = [1, 2, 3, 4, 5]\r\n    worker = Worker(process_data, data, 10)\r\n    worker.signals.result.connect(self.on_data_processed)\r\n    self.threadpool.start(worker)\n"})}),"\n",(0,i.jsx)(r.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'def potentially_failing_task(progress_callback):\r\n    # Some operation that might fail\r\n    if some_condition:\r\n        raise ValueError("Something went wrong!")\r\n    return "Success"\r\n\r\ndef start_risky_task(self):\r\n    worker = Worker(potentially_failing_task)\r\n    worker.signals.error.connect(self.handle_error)\r\n    worker.signals.result.connect(self.handle_success)\r\n    self.threadpool.start(worker)\r\n\r\ndef handle_error(self, error):\r\n    exctype, value, traceback_str = error\r\n    print(f"Error: {exctype.__name__}: {value}")\r\n\r\ndef handle_success(self, result):\r\n    print(f"Success: {result}")\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"integration-with-custom-widgets",children:"Integration with Custom Widgets"}),"\n",(0,i.jsx)(r.h3,{id:"with-progress-indicators",children:"With Progress Indicators"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from Custom_Widgets import FormProgressIndicator\r\n\r\nclass MyApp(QMainWindow):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.progress_indicator = FormProgressIndicator()\r\n        \r\n    def start_task_with_progress(self):\r\n        worker = Worker(self.long_operation)\r\n        worker.signals.progress.connect(self.progress_indicator.setValue)\r\n        worker.signals.finished.connect(self.progress_indicator.hide)\r\n        self.threadpool.start(worker)\r\n        self.progress_indicator.show()\n"})}),"\n",(0,i.jsx)(r.h3,{id:"with-theme-engine",children:"With Theme Engine"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"from Custom_Widgets.QCustomTheme import QCustomTheme\r\n\r\nclass ThemedApp(QMainWindow):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.theme_engine = QCustomTheme()\r\n        \r\n    def generate_theme_icons(self):\r\n        worker = Worker(self.theme_engine.generateNewIcons)\r\n        worker.signals.progress.connect(self.update_icon_progress)\r\n        worker.signals.finished.connect(self.theme_engine.applyIcons)\r\n        self.threadpool.start(worker)\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,i.jsx)(r.h3,{id:"multiple-coordinated-workers",children:"Multiple Coordinated Workers"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'def start_parallel_tasks(self):\r\n    self.completed_tasks = 0\r\n    self.total_tasks = 3\r\n    \r\n    for i in range(self.total_tasks):\r\n        worker = Worker(self.individual_task, i)\r\n        worker.signals.finished.connect(self.on_single_task_done)\r\n        self.threadpool.start(worker)\r\n\r\ndef on_single_task_done(self):\r\n    self.completed_tasks += 1\r\n    if self.completed_tasks == self.total_tasks:\r\n        print("All tasks completed!")\n'})}),"\n",(0,i.jsx)(r.h3,{id:"interruptible-worker",children:"Interruptible Worker"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'def start_interruptible_task(self):\r\n    self.current_worker = Worker(self.long_operation)\r\n    self.current_worker.signals.finished.connect(self.on_worker_finished)\r\n    self.threadpool.start(self.current_worker)\r\n\r\ndef stop_current_task(self):\r\n    if hasattr(self, \'current_worker\'):\r\n        self.current_worker.stop()\r\n\r\ndef long_operation(self, progress_callback):\r\n    for i in range(1000):\r\n        if self.current_worker.is_interrupted:\r\n            return "Operation interrupted"\r\n        \r\n        if progress_callback:\r\n            progress_callback.emit(i // 10)\r\n        \r\n        QThread.msleep(100)\r\n    \r\n    return "Operation completed"\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(r.h3,{id:"1-always-handle-errors",children:"1. Always Handle Errors"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"worker = Worker(self.background_task)\r\nworker.signals.error.connect(self.handle_worker_error)\r\nworker.signals.finished.connect(self.cleanup_resources)\n"})}),"\n",(0,i.jsx)(r.h3,{id:"2-use-progress-callbacks-for-long-tasks",children:"2. Use Progress Callbacks for Long Tasks"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"def background_task(self, progress_callback):\r\n    total_steps = 100\r\n    for step in range(total_steps):\r\n        if progress_callback:\r\n            progress = int((step + 1) / total_steps * 100)\r\n            progress_callback.emit(progress)\r\n        # Perform work...\n"})}),"\n",(0,i.jsx)(r.h3,{id:"3-proper-resource-cleanup",children:"3. Proper Resource Cleanup"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"def cleanup_resources(self):\r\n    # Clean up any resources used by workers\r\n    if hasattr(self, 'current_worker'):\r\n        self.current_worker.stop()\n"})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"key-features-in-custom-widgets-context",children:"Key Features in Custom Widgets Context"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Seamless Integration"}),": Works perfectly with other Custom Widgets components"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Non-blocking UI"}),": Keeps your application responsive during operations"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Automatic Cleanup"}),": Workers clean up automatically when finished"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Flexible Communication"}),": Multiple signal types for different communication needs"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Progress Tracking"}),": Essential for user feedback during long operations"]}),"\n"]}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.h2,{id:"example-file-processing-with-progress",children:"Example: File Processing with Progress"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:"def process_files(self, file_list):\r\n    worker = Worker(self.process_file_batch, file_list)\r\n    worker.signals.progress.connect(self.ui.progressBar.setValue)\r\n    worker.signals.result.connect(self.on_files_processed)\r\n    worker.signals.error.connect(self.on_processing_error)\r\n    self.threadpool.start(worker)\r\n\r\ndef process_file_batch(self, file_list, progress_callback):\r\n    results = []\r\n    total_files = len(file_list)\r\n    \r\n    for i, file_path in enumerate(file_list):\r\n        # Process each file\r\n        result = self.process_single_file(file_path)\r\n        results.append(result)\r\n        \r\n        # Update progress\r\n        if progress_callback:\r\n            progress = int((i + 1) / total_files * 100)\r\n            progress_callback.emit(progress)\r\n    \r\n    return results\n"})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"WidgetsWorker"})," module is an essential tool for creating responsive Qt applications within the Custom Widgets framework, providing a simple yet powerful way to handle background operations while maintaining smooth user interaction."]})]})}function p(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>o,x:()=>l});var n=s(6540);const i={},t=n.createContext(i);function o(e){const r=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);