"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[2688],{4431:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Widgets/QCustomAnnotationWidget","title":"QCustomAnnotationWidget","description":"QCustomAnnotationWidget (Canvas) is a powerful image annotation tool that provides a comprehensive drawing canvas for creating and managing annotations on images. It supports multiple shape types, Bezier curves, polygonal annotations, and exports annotations to JSON format for machine learning datasets.","source":"@site/docs/01-Widgets/QCustomAnnotationWidget.md","sourceDirName":"01-Widgets","slug":"/Widgets/QCustomAnnotationWidget","permalink":"/Docs-QT-PyQt-PySide-Custom-Widgets/Widgets/QCustomAnnotationWidget","draft":false,"unlisted":false,"editUrl":"https://github.com/SpinnCompany/Docs-QT-PyQt-PySide-Custom-Widgets/tree/main/docs/01-Widgets/QCustomAnnotationWidget.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"QBadgeWidget","permalink":"/Docs-QT-PyQt-PySide-Custom-Widgets/Widgets/QBadgeWidget"},"next":{"title":"QCustomQToolTip","permalink":"/Docs-QT-PyQt-PySide-Custom-Widgets/Widgets/QCustomQToolTip"}}');var r=s(4848),l=s(8453);const o={},a="QCustomAnnotationWidget",t={},d=[{value:"Overview",id:"overview",level:2},{value:"Constructor",id:"constructor",level:2},{value:"Key Properties",id:"key-properties",level:2},{value:"<code>draw_shape</code> (str)",id:"draw_shape-str",level:3},{value:"<code>pen_color</code> (QColor)",id:"pen_color-qcolor",level:3},{value:"<code>current_label</code> (str)",id:"current_label-str",level:3},{value:"<code>project_folder</code> (str)",id:"project_folder-str",level:3},{value:"<code>zoom_factor</code> (float)",id:"zoom_factor-float",level:3},{value:"Methods",id:"methods",level:2},{value:"<code>setProjectFolder(folder)</code>",id:"setprojectfolderfolder",level:3},{value:"<code>setLabel(label)</code>",id:"setlabellabel",level:3},{value:"<code>setBackgroundImage(image_path)</code>",id:"setbackgroundimageimage_path",level:3},{value:"<code>setPenColor(c)</code>",id:"setpencolorc",level:3},{value:"<code>setDrawShape(shape)</code>",id:"setdrawshapeshape",level:3},{value:"<code>saveData()</code>",id:"savedata",level:3},{value:"<code>loadImageAnnotations(image_url)</code>",id:"loadimageannotationsimage_url",level:3},{value:"<code>deleteShapeFromJson(image_url, shape_to_delete)</code>",id:"deleteshapefromjsonimage_url-shape_to_delete",level:3},{value:"<code>readLabelsFromJsonFiles()</code>",id:"readlabelsfromjsonfiles",level:3},{value:"<code>updateCanvas(update=False)</code>",id:"updatecanvasupdatefalse",level:3},{value:"<code>deleteShape(shape)</code>",id:"deleteshapeshape",level:3},{value:"<code>zoomIn()</code>",id:"zoomin",level:3},{value:"<code>zoomOut()</code>",id:"zoomout",level:3},{value:"<code>exportToPng()</code>",id:"exporttopng",level:3},{value:"Signals",id:"signals",level:2},{value:"<code>shapeAdded(shape_type, color, label, coordinates)</code>",id:"shapeaddedshape_type-color-label-coordinates",level:3},{value:"Drawing Modes",id:"drawing-modes",level:2},{value:"Rectangle &amp; Ellipse",id:"rectangle--ellipse",level:3},{value:"Line",id:"line",level:3},{value:"Polyline",id:"polyline",level:3},{value:"Bezier Curve",id:"bezier-curve",level:3},{value:"Polygon",id:"polygon",level:3},{value:"Usage Example",id:"usage-example",level:2},{value:"Basic Setup",id:"basic-setup",level:3},{value:"Complete Annotation Workflow",id:"complete-annotation-workflow",level:3},{value:"Multi-Label Annotation",id:"multi-label-annotation",level:3},{value:"Loading Existing Annotations",id:"loading-existing-annotations",level:3},{value:"JSON Output Format",id:"json-output-format",level:2},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Bezier Curve Mathematics",id:"bezier-curve-mathematics",level:3},{value:"Polygon Support",id:"polygon-support",level:3},{value:"Zoom Implementation",id:"zoom-implementation",level:3},{value:"Event Handling",id:"event-handling",level:3},{value:"Additional Notes",id:"additional-notes",level:2}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"qcustomannotationwidget",children:"QCustomAnnotationWidget"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"QCustomAnnotationWidget"})," (Canvas) is a powerful image annotation tool that provides a comprehensive drawing canvas for creating and managing annotations on images. It supports multiple shape types, Bezier curves, polygonal annotations, and exports annotations to JSON format for machine learning datasets."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Multi-Shape Annotation:"}),(0,r.jsx)(n.br,{}),"\n","Supports rectangles, ellipses, lines, polylines, polygons, and Bezier curves."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Project Management:"}),(0,r.jsx)(n.br,{}),"\n","Organizes annotations into project folders with automatic image and JSON file management."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Real-time Drawing:"}),(0,r.jsx)(n.br,{}),"\n","Interactive drawing with live preview and smooth cursor tracking."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"JSON Export:"}),(0,r.jsx)(n.br,{}),"\n","Exports annotations in standardized JSON format compatible with machine learning frameworks."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Zoom Capabilities:"}),(0,r.jsx)(n.br,{}),"\n","Built-in zoom functionality for detailed annotation work."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Label Management:"}),(0,r.jsx)(n.br,{}),"\n","Supports multiple labels and organizes shapes by label categories."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"Canvas()\n"})}),"\n",(0,r.jsx)(n.p,{children:"Creates a new annotation canvas with default settings."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"key-properties",children:"Key Properties"}),"\n",(0,r.jsxs)(n.h3,{id:"draw_shape-str",children:[(0,r.jsx)(n.code,{children:"draw_shape"})," (str)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"}),(0,r.jsx)(n.br,{}),"\n","Current drawing shape type."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Available Values:"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:'"rectangle"'}),", ",(0,r.jsx)(n.code,{children:'"ellipse"'}),", ",(0,r.jsx)(n.code,{children:'"line"'}),", ",(0,r.jsx)(n.code,{children:'"polyline"'}),", ",(0,r.jsx)(n.code,{children:'"bezier"'}),", ",(0,r.jsx)(n.code,{children:'"polygon"'})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"pen_color-qcolor",children:[(0,r.jsx)(n.code,{children:"pen_color"})," (QColor)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"}),(0,r.jsx)(n.br,{}),"\n","Current drawing pen color."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"current_label-str",children:[(0,r.jsx)(n.code,{children:"current_label"})," (str)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"}),(0,r.jsx)(n.br,{}),"\n","Current annotation label for newly drawn shapes."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"project_folder-str",children:[(0,r.jsx)(n.code,{children:"project_folder"})," (str)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"}),(0,r.jsx)(n.br,{}),"\n","Path to the project folder for saving annotations."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"zoom_factor-float",children:[(0,r.jsx)(n.code,{children:"zoom_factor"})," (float)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Purpose:"}),(0,r.jsx)(n.br,{}),"\n","Current zoom level multiplier."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"setprojectfolderfolder",children:(0,r.jsx)(n.code,{children:"setProjectFolder(folder)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Sets the project folder path for saving annotations and images."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"folder"}),": Path to project directory."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"setlabellabel",children:(0,r.jsx)(n.code,{children:"setLabel(label)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Sets the current label for new annotations."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"}),": Label name string."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"setbackgroundimageimage_path",children:(0,r.jsx)(n.code,{children:"setBackgroundImage(image_path)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Loads an image as the canvas background and loads existing annotations."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_path"}),": Path to the image file."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"setpencolorc",children:(0,r.jsx)(n.code,{children:"setPenColor(c)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Sets the drawing pen color."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"c"}),": Color string or QColor object."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"setdrawshapeshape",children:(0,r.jsx)(n.code,{children:"setDrawShape(shape)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Sets the current drawing shape type."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shape"}),": Shape type string."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"savedata",children:(0,r.jsx)(n.code,{children:"saveData()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Saves all annotations to JSON file in the project folder."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"True"})," if successful, ",(0,r.jsx)(n.code,{children:"False"})," otherwise."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Copies image to project "images" folder'}),"\n",(0,r.jsx)(n.li,{children:"Creates JSON annotation file"}),"\n",(0,r.jsx)(n.li,{children:"Groups shapes by labels"}),"\n",(0,r.jsx)(n.li,{children:"Maintains coordinate data"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"loadimageannotationsimage_url",children:(0,r.jsx)(n.code,{children:"loadImageAnnotations(image_url)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Loads annotations from JSON file for the specified image."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_url"}),": Path to the image file."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"deleteshapefromjsonimage_url-shape_to_delete",children:(0,r.jsx)(n.code,{children:"deleteShapeFromJson(image_url, shape_to_delete)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Removes a specific shape from the annotation JSON file."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"image_url"}),": Path to the image file."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shape_to_delete"}),": Shape tuple to remove."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"True"})," if successful, ",(0,r.jsx)(n.code,{children:"False"})," otherwise."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"readlabelsfromjsonfiles",children:(0,r.jsx)(n.code,{children:"readLabelsFromJsonFiles()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Reads all unique labels from all JSON files in the project folder."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Returns:"}),(0,r.jsx)(n.br,{}),"\n","Set of unique label strings."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"updatecanvasupdatefalse",children:(0,r.jsx)(n.code,{children:"updateCanvas(update=False)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Redraws the canvas with all shapes and current drawing preview."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"update"}),": If ",(0,r.jsx)(n.code,{children:"True"}),", includes current drawing preview."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"deleteshapeshape",children:(0,r.jsx)(n.code,{children:"deleteShape(shape)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Removes a shape from the canvas and JSON file."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shape"}),": Shape tuple to delete."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"zoomin",children:(0,r.jsx)(n.code,{children:"zoomIn()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Increases zoom level by 10%."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"zoomout",children:(0,r.jsx)(n.code,{children:"zoomOut()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Decreases zoom level by 10%."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exporttopng",children:(0,r.jsx)(n.code,{children:"exportToPng()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Exports the current canvas (image + annotations) as PNG file."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"signals",children:"Signals"}),"\n",(0,r.jsx)(n.h3,{id:"shapeaddedshape_type-color-label-coordinates",children:(0,r.jsx)(n.code,{children:"shapeAdded(shape_type, color, label, coordinates)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Description:"}),(0,r.jsx)(n.br,{}),"\n","Emitted when a new shape is added to the canvas."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shape_type"}),": Type of shape drawn"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"color"}),": Pen color used"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"label"}),": Annotation label"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"coordinates"}),": Shape coordinates list"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"drawing-modes",children:"Drawing Modes"}),"\n",(0,r.jsx)(n.h3,{id:"rectangle--ellipse",children:"Rectangle & Ellipse"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Press:"})," Set start point"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Drag:"})," Live preview"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Release:"})," Finalize shape"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"line",children:"Line"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Press:"})," Set start point"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Drag:"})," Live preview"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Release:"})," Finalize line"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"polyline",children:"Polyline"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Left Click:"})," Add point"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Drag:"})," Continuous drawing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Right Click:"})," Finish polyline"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"bezier-curve",children:"Bezier Curve"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Left Click:"})," Add control point"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Drag:"})," Adjust last control point"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Right Click:"})," Finish curve"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"polygon",children:"Polygon"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Left Click:"})," Add vertex"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mouse Drag:"})," Adjust last vertex"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Right Click:"})," Finish polygon"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,r.jsx)(n.h3,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from Custom_Widgets.QCustomAnnotationWidget import Canvas\r\n\r\n# Create canvas\r\ncanvas = Canvas()\r\n\r\n# Set project folder\r\ncanvas.setProjectFolder("/path/to/project")\r\n\r\n# Load image for annotation\r\ncanvas.setBackgroundImage("/path/to/image.jpg")\r\n\r\n# Set annotation label\r\ncanvas.setLabel("person")\r\n\r\n# Set drawing color\r\ncanvas.setPenColor("#ff0000")  # Red\r\n\r\n# Set drawing shape\r\ncanvas.setDrawShape("rectangle")\n'})}),"\n",(0,r.jsx)(n.h3,{id:"complete-annotation-workflow",children:"Complete Annotation Workflow"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'class AnnotationTool:\r\n    def __init__(self):\r\n        self.canvas = Canvas()\r\n        self.setup_canvas()\r\n    \r\n    def setup_canvas(self):\r\n        # Connect to shape added signal\r\n        self.canvas.shapeAdded.connect(self.on_shape_added)\r\n        \r\n        # Set project structure\r\n        self.canvas.setProjectFolder("my_annotation_project")\r\n        \r\n        # Set initial settings\r\n        self.canvas.setLabel("object")\r\n        self.canvas.setPenColor("#3498db")\r\n        self.canvas.setDrawShape("rectangle")\r\n    \r\n    def load_image(self, image_path):\r\n        self.canvas.setBackgroundImage(image_path)\r\n    \r\n    def on_shape_added(self, shape_type, color, label, coordinates):\r\n        print(f"Shape added: {shape_type}, Label: {label}, Points: {len(coordinates)}")\r\n    \r\n    def save_annotations(self):\r\n        if self.canvas.saveData():\r\n            print("Annotations saved successfully!")\r\n        else:\r\n            print("Failed to save annotations.")\r\n    \r\n    def export_visualization(self):\r\n        self.canvas.exportToPng()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"multi-label-annotation",children:"Multi-Label Annotation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Switch between different labels\r\ncanvas.setLabel("vehicle")\r\ncanvas.setPenColor("#e74c3c")  # Red\r\ncanvas.setDrawShape("rectangle")\r\n\r\n# Annotate vehicles...\r\n\r\ncanvas.setLabel("pedestrian") \r\ncanvas.setPenColor("#2ecc71")  # Green\r\ncanvas.setDrawShape("polygon")\r\n\r\n# Annotate pedestrians...\r\n\r\n# Save all annotations\r\ncanvas.saveData()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"loading-existing-annotations",children:"Loading Existing Annotations"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Load image with existing annotations\r\ncanvas.setBackgroundImage("project/images/image_001.jpg")\r\n\r\n# The annotations are automatically loaded from:\r\n# project/image_001.jpg.json\r\n\r\n# Get all unique labels in project\r\nlabels = canvas.readLabelsFromJsonFiles()\r\nprint("Available labels:", labels)\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"json-output-format",children:"JSON Output Format"}),"\n",(0,r.jsx)(n.p,{children:"Annotations are saved in this standardized format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\r\n  "image_path": "images/sample.jpg",\r\n  "annotations": [\r\n    {\r\n      "label": "person",\r\n      "shapes": [\r\n        {\r\n          "type": "rectangle",\r\n          "color": "#ff0000",\r\n          "coordinates": [100, 150, 200, 300]\r\n        },\r\n        {\r\n          "type": "polygon", \r\n          "color": "#00ff00",\r\n          "coordinates": [\r\n            [150, 200],\r\n            [180, 220],\r\n            [160, 250],\r\n            [140, 230]\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,r.jsx)(n.h3,{id:"bezier-curve-mathematics",children:"Bezier Curve Mathematics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uses Bernstein polynomials for smooth curve calculation"}),"\n",(0,r.jsx)(n.li,{children:"Supports multiple control points"}),"\n",(0,r.jsx)(n.li,{children:"High precision with 1000 interpolation steps"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"polygon-support",children:"Polygon Support"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creates closed polygonal shapes"}),"\n",(0,r.jsx)(n.li,{children:"Useful for irregular object boundaries"}),"\n",(0,r.jsx)(n.li,{children:"Maintains vertex order and connectivity"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"zoom-implementation",children:"Zoom Implementation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Maintains aspect ratio during scaling"}),"\n",(0,r.jsx)(n.li,{children:"Smooth zoom transitions"}),"\n",(0,r.jsx)(n.li,{children:"High-quality image rendering"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"event-handling",children:"Event Handling"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Comprehensive mouse event management"}),"\n",(0,r.jsx)(n.li,{children:"Real-time drawing feedback"}),"\n",(0,r.jsx)(n.li,{children:"Context-aware right-click actions"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"additional-notes",children:"Additional Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Image Formats:"}),(0,r.jsx)(n.br,{}),"\n","Supports all image formats supported by Qt (PNG, JPG, BMP, etc.)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Coordinate System:"}),(0,r.jsx)(n.br,{}),"\n","Uses image pixel coordinates for precise annotation"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Performance:"}),(0,r.jsx)(n.br,{}),"\n","Efficient redrawing with selective updates"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Compatibility:"}),(0,r.jsx)(n.br,{}),"\n","JSON output compatible with popular ML frameworks (YOLO, COCO, etc.)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Error Handling:"}),(0,r.jsx)(n.br,{}),"\n","Robust error handling for file operations and invalid inputs"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"QCustomAnnotationWidget"})," is ideal for computer vision projects, machine learning datasets, image labeling applications, and any scenario requiring precise image annotation with export capabilities."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(6540);const r={},l=i.createContext(r);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);